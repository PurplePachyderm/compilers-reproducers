


Compile the lib and program:

Compile object file:


icx libWithOpenMP.c -fPIC -qmkl=sequential -qopenmp -fopenmp-targets=spir64 -c


For shared:

	Compile the lib: 
	
	icx -fPIC -qmkl=sequential -qopenmp -fopenmp-targets=spir64 -shared -c -g -fPIC src/libWithOpenMP.c -o libtest.so
	

	Compile test.c:

	icx -qmkl=sequential -qopenmp -fopenmp-targets=spir64 -L./lib/ -I./lib/src -ltest test.c -g -o sharedOut
	

For static:

	Compile the lib

	ar r libtest.a src/libWithOpenMP.o

	Compile test.c

	icx -qmkl=sequential -qopenmp -fopenmp-targets=spir64 -I./lib/src/ ./lib/libtest.a  test.c -o staticout



1.

RESULT:


For shared:

0xffffd556aa7e0000 
0xffffd556aa7e0080 
LEVEL0 error: Failed to invoke deleted kernel.
Libomptarget error: Executing target region abort target.
Libomptarget error: Run with
Libomptarget error: LIBOMPTARGET_DEBUG=1 to display basic debug information.
Libomptarget error: LIBOMPTARGET_DEBUG=2 to display calls to the compute runtime.
Libomptarget error: LIBOMPTARGET_INFO=4 to dump host-target pointer mappings.
libWithOpenMP.c:28:30: Libomptarget fatal error 1: failure of target construct while offloading is mandatory
Aborted

For static:

Can't compile, don't find any function from the lib
